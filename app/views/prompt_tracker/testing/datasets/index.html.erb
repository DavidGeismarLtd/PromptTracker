<% content_for :breadcrumbs do %>
  <li class="breadcrumb-item"><%= link_to @testable.name, testable_show_path(@testable) %></li>
  <li class="breadcrumb-item active">Datasets</li>
<% end %>

<div class="page-header" style="background-color: #EFF6FF; border-left: 4px solid #3B82F6; padding: 1.5rem; margin-bottom: 2rem;">
  <div class="d-flex justify-content-between align-items-start">
    <div>
      <h1 style="color: #1E40AF; margin: 0;">
        <i class="bi bi-database"></i> Datasets
        <%= testable_badge(@testable) %>
      </h1>
      <p style="color: #1E40AF; margin: 0.5rem 0 0 0;">
        Reusable test data collections for <%= @testable.name %>
      </p>
    </div>
    <div class="d-flex gap-2">
      <%= link_to testable_show_path(@testable), class: "btn btn-outline-primary" do %>
        <i class="bi bi-arrow-left"></i> Back
      <% end %>
      <%= link_to new_dataset_path(@testable), class: "btn btn-primary" do %>
        <i class="bi bi-plus-circle"></i> New Dataset
      <% end %>
    </div>
  </div>
</div>

<!-- Info Alert -->
<div class="alert alert-info mb-4">
  <h6 class="alert-heading"><i class="bi bi-info-circle"></i> About Datasets</h6>
  <ul class="mb-0">
    <li><strong>Reusable test data:</strong> Create collections of variable values to run tests at scale</li>
    <li><strong>Manual or AI-generated:</strong> Add rows manually or generate them using LLMs</li>
    <li><strong>Version-specific:</strong> Each dataset is tied to a specific prompt version's schema</li>
  </ul>
</div>

<% if @datasets.any? %>
  <div class="row">
    <% @datasets.each do |dataset| %>
      <%= render "dataset_card", dataset: dataset %>
    <% end %>
  </div>
<% else %>
  <%= render "empty_state", testable: @testable %>
<% end %>
