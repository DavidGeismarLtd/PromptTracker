<tr id="test_row_<%= test.id %>">
  <td>
    <strong>
      <%= link_to test.name, testing_prompt_prompt_version_prompt_test_path(prompt, version, test), class: "text-decoration-none" %>
    </strong>
    <% unless test.enabled? %>
      <span class="badge bg-secondary ms-2">Disabled</span>
    <% end %>
    <% if test.description.present? %>
      <br><small class="text-muted"><%= truncate(test.description, length: 80) %></small>
    <% end %>
  </td>
  <td class="test-status">
    <% if test.last_run %>
      <% case test.last_run.status %>
      <% when 'running' %>
        <span class="badge bg-warning">
          <span class="spinner-border spinner-border-sm me-1"></span>Running
        </span>
      <% when 'passed' %>
        <span class="badge bg-success">Passed</span>
      <% when 'failed' %>
        <span class="badge bg-danger">Failed</span>
      <% when 'error' %>
        <span class="badge bg-danger">Error</span>
      <% else %>
        <span class="badge bg-secondary">Unknown</span>
      <% end %>
    <% else %>
      <span class="badge bg-secondary">Not Run</span>
    <% end %>
  </td>
  <td>
    <% if test.last_run %>
      <%= time_ago_in_words(test.last_run.created_at) %> ago
    <% else %>
      <span class="text-muted">Never</span>
    <% end %>
  </td>
  <td class="text-end"><%= test.prompt_test_runs.count %></td>
  <td>
    <%= link_to "View", testing_prompt_prompt_version_prompt_test_path(prompt, version, test), class: "btn btn-sm btn-outline-primary me-1" %>
    <%= link_to "Edit", edit_testing_prompt_prompt_version_prompt_test_path(prompt, version, test), class: "btn btn-sm btn-outline-secondary me-1" %>
    <%= button_to "Run", run_testing_prompt_prompt_version_prompt_test_path(prompt, version, test), method: :post, class: "btn btn-sm btn-outline-success" %>
  </td>
</tr>
